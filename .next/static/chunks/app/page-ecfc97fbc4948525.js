(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2147:function(e,s,n){Promise.resolve().then(n.bind(n,7161))},7161:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return Home}});var t=n(7437),i=n(2265),a=n(4033),l=n(1396),c=n.n(l),r=n(6691),o=n.n(r);function MasonryGrid(e){let{prints:s,onPrintClick:n}=e,[a,l]=(0,i.useState)(3);if((0,i.useEffect)(()=>{let handleResize=()=>{let e=window.innerWidth;e<640?l(2):e<1024?l(3):e<1280?l(4):l(5)};return handleResize(),window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),0===s.length)return(0,t.jsxs)("div",{className:"no-prints-message-container",children:[(0,t.jsx)("div",{className:"no-prints-message-icon",children:"\uD83D\uDCC2"}),(0,t.jsx)("h3",{className:"no-prints-message-title",children:"プリントがありません"}),(0,t.jsx)("p",{className:"no-prints-message-text",children:"右下の「+」ボタンから追加してください。"})]});let c=(()=>{let e=Array.from({length:a},()=>[]);return s.forEach((s,n)=>{e[n%a].push(s)}),e})();return(0,t.jsx)("div",{className:"masonry-grid-container",style:{gridTemplateColumns:"repeat(".concat(a,", 1fr)")},children:c.map((e,s)=>(0,t.jsx)("div",{className:"masonry-column",children:e.map(e=>(0,t.jsx)("div",{className:"masonry-item",onClick:()=>{console.log("Masonry item clicked:",e.id),n(e)},children:(0,t.jsx)(o(),{src:e.url,alt:e.filename,width:500,height:700,className:"masonry-image",sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, (max-width: 1280px) 25vw, 20vw",priority:!0})},e.id))},s))})}var d=n(243),h=n(3236),m=n(1037);let AddIcon=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[(0,t.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]}),CheckIcon=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"currentColor",children:[(0,t.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,t.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})]}),FamilyTab=e=>{let{text:s,selected:n,onClick:i}=e;return(0,t.jsxs)("button",{onClick:i,className:"family-tab ".concat(n?"selected":""),children:[s,n&&(0,t.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary transform scale-x-100 transition-transform duration-200"})]})},CategoryChip=e=>{let{text:s,selected:n,onClick:i}=e;return(0,t.jsxs)("button",{onClick:i,className:"category-chip ".concat(n?"selected":""),children:[n&&(0,t.jsx)("span",{className:"check-icon-container",children:(0,t.jsx)(CheckIcon,{})}),s]})};function Home(){let e=(0,a.useRouter)(),[s,n]=(0,i.useState)(null),[l,r]=(0,i.useState)(null),[o,x]=(0,i.useState)(!1),[u,p]=(0,i.useState)(""),[g,j]=(0,i.useState)(null),{prints:v,isLoading:f,updateCategory:C,refreshPrints:w,categories:N}=(0,m.Q)(g),y=l?v.filter(e=>e.category_name===l):v,b=u?y.filter(e=>e.filename.toLowerCase().includes(u.toLowerCase())):y;return(0,t.jsx)("div",{className:"page-container",children:(0,t.jsxs)("main",{className:"main-content",children:[(0,t.jsxs)("div",{className:"filters-section",children:[(0,t.jsx)("section",{className:"family-tabs-section",children:(0,t.jsxs)("div",{className:"family-tabs-container",children:[(0,t.jsx)(FamilyTab,{text:"全員",selected:null===g,onClick:()=>j(null)}),["かえで","しおり","あん","ママ","パパ"].map(e=>(0,t.jsx)(FamilyTab,{text:e,selected:g===e,onClick:()=>j(e)},e))]})}),(0,t.jsx)("section",{children:(0,t.jsxs)("div",{className:"category-chips-container",children:[(0,t.jsx)(CategoryChip,{text:"#すべて",selected:null===l,onClick:()=>r(null)},"all-categories"),N.map(e=>(0,t.jsx)(CategoryChip,{text:"#".concat(e.name),selected:l===e.name,onClick:()=>r(e.name)},e.id)),(0,t.jsx)("button",{onClick:()=>x(!0),className:"category-manage-button",children:"カテゴリ管理"})]})})]}),(0,t.jsx)("section",{className:"content-section",children:f?(0,t.jsxs)("div",{className:"loading-container",children:[(0,t.jsx)("div",{className:"loading-spinner"}),(0,t.jsx)("p",{className:"loading-text",children:"読み込み中..."})]}):(0,t.jsx)(MasonryGrid,{prints:b,onPrintClick:s=>{console.log("handlePrintClick called for:",s.id),e.push("/print/".concat(s.id)),console.log("Attempting to navigate to:","/print/".concat(s.id))}})}),(0,t.jsx)(c(),{href:"/upload",children:(0,t.jsx)("div",{className:"fab-button",children:(0,t.jsx)(AddIcon,{})})}),(0,t.jsx)(d.Z,{isOpen:o,onClose:()=>x(!1),title:"カテゴリ管理",children:(0,t.jsx)(h.Z,{onClose:()=>x(!1),existingCategories:N,onCategoryUpdated:w})})]})})}}},function(e){e.O(0,[183,396,691,316,971,472,744],function(){return e(e.s=2147)}),_N_E=e.O()}]);