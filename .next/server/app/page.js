(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4426:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(7096),i=s(6132),n=s(7284),a=s.n(n),o=s(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3982)),"/Users/satokeita/Dev/famiPrint/famiPrint/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3389)),"/Users/satokeita/Dev/famiPrint/famiPrint/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/satokeita/Dev/famiPrint/famiPrint/app/page.tsx"],u="/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1719:(e,t,s)=>{Promise.resolve().then(s.bind(s,1831))},1831:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var r=s(784),i=s(9885),n=s(7114),a=s(1440),o=s.n(a),l=s(2451),c=s.n(l);function MasonryGrid({prints:e,onPrintClick:t}){let[s,n]=(0,i.useState)(3);if((0,i.useEffect)(()=>{let handleResize=()=>{let e=window.innerWidth;e<640?n(2):e<1024?n(3):e<1280?n(4):n(5)};return handleResize(),window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),0===e.length)return(0,r.jsxs)("div",{className:"no-prints-message-container",children:[r.jsx("div",{className:"no-prints-message-icon",children:"\uD83D\uDCC2"}),r.jsx("h3",{className:"no-prints-message-title",children:"プリントがありません"}),r.jsx("p",{className:"no-prints-message-text",children:"右下の「+」ボタンから追加してください。"})]});let a=(()=>{let t=Array.from({length:s},()=>[]);return e.forEach((e,r)=>{t[r%s].push(e)}),t})();return r.jsx("div",{className:"masonry-grid-container",style:{gridTemplateColumns:`repeat(${s}, 1fr)`},children:a.map((e,s)=>r.jsx("div",{className:"masonry-column",children:e.map(e=>r.jsx("div",{className:"masonry-item",onClick:()=>{console.log("Masonry item clicked:",e.id),t(e)},children:r.jsx(c(),{src:e.url,alt:e.filename,width:500,height:700,className:"masonry-image",sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, (max-width: 1280px) 25vw, 20vw",priority:!0})},e.id))},s))})}var d=s(6110),u=s(4667),p=s(4431);let AddIcon=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[r.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]}),CheckIcon=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"currentColor",children:[r.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})]}),FamilyTab=({text:e,selected:t,onClick:s})=>(0,r.jsxs)("button",{onClick:s,className:`family-tab ${t?"selected":""}`,children:[e,t&&r.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary transform scale-x-100 transition-transform duration-200"})]}),CategoryChip=({text:e,selected:t,onClick:s})=>(0,r.jsxs)("button",{onClick:s,className:`category-chip ${t?"selected":""}`,children:[t&&r.jsx("span",{className:"check-icon-container",children:r.jsx(CheckIcon,{})}),e]});function Home(){let e=(0,n.useRouter)(),[t,s]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[c,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(""),[g,v]=(0,i.useState)(null),{prints:f,isLoading:j,updateCategory:y,refreshPrints:w,categories:C}=(0,p.Q)(g),_=a?f.filter(e=>e.category_name===a):f,b=m?_.filter(e=>e.filename.toLowerCase().includes(m.toLowerCase())):_;return r.jsx("div",{className:"page-container",children:(0,r.jsxs)("main",{className:"main-content",children:[(0,r.jsxs)("div",{className:"filters-section",children:[r.jsx("section",{className:"family-tabs-section",children:(0,r.jsxs)("div",{className:"family-tabs-container",children:[r.jsx(FamilyTab,{text:"全員",selected:null===g,onClick:()=>v(null)}),["かえで","しおり","あん","ママ","パパ"].map(e=>r.jsx(FamilyTab,{text:e,selected:g===e,onClick:()=>v(e)},e))]})}),r.jsx("section",{children:(0,r.jsxs)("div",{className:"category-chips-container",children:[r.jsx(CategoryChip,{text:"#すべて",selected:null===a,onClick:()=>l(null)},"all-categories"),C.map(e=>r.jsx(CategoryChip,{text:`#${e.name}`,selected:a===e.name,onClick:()=>l(e.name)},e.id)),r.jsx("button",{onClick:()=>x(!0),className:"category-manage-button",children:"カテゴリ管理"})]})})]}),r.jsx("section",{className:"content-section",children:j?(0,r.jsxs)("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{className:"loading-text",children:"読み込み中..."})]}):r.jsx(MasonryGrid,{prints:b,onPrintClick:t=>{console.log("handlePrintClick called for:",t.id),e.push(`/print/${t.id}`),console.log("Attempting to navigate to:",`/print/${t.id}`)}})}),r.jsx(o(),{href:"/upload",children:r.jsx("div",{className:"fab-button",children:r.jsx(AddIcon,{})})}),r.jsx(d.Z,{isOpen:c,onClose:()=>x(!1),title:"カテゴリ管理",children:r.jsx(u.Z,{onClose:()=>x(!1),existingCategories:C,onCategoryUpdated:w})})]})})}},3982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>l});var r=s(5153);let i=(0,r.createProxy)(String.raw`/Users/satokeita/Dev/famiPrint/famiPrint/app/page.tsx`),{__esModule:n,$$typeof:a}=i,o=i.default,l=o}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[611,485,440,451,606,50,431,667],()=>__webpack_exec__(4426));module.exports=s})();