(()=>{var e={};e.id=772,e.ids=[772],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4405:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(7096),i=s(6132),a=s(7284),n=s.n(a),o=s(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["print",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9335)),"/Users/satokeita/Dev/famiPrint/famiPrint/app/print/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3389)),"/Users/satokeita/Dev/famiPrint/famiPrint/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/satokeita/Dev/famiPrint/famiPrint/app/print/[id]/page.tsx"],u="/print/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/print/[id]/page",pathname:"/print/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4816:(e,t,s)=>{Promise.resolve().then(s.bind(s,4357))},4357:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>PrintDetailPage});var r=s(784),i=s(9885),a=s(7114),n=s(2451),o=s.n(n),l=s(6310),c=s(6110),d=s(4667),u=s(4431);let ArrowBackIcon=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[r.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]}),DownloadIcon=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[r.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})]}),CategoryIcon=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[r.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5zM12 14l-8 4 8 4 8-4-8-4z"})]});function PrintDetailPage({params:e}){let t=(0,a.useRouter)(),{id:s}=e,[n,p]=(0,i.useState)(null),[x,h]=(0,i.useState)(!0),[m,g]=(0,i.useState)(null),[f,j]=(0,i.useState)(!1),[v,y]=(0,i.useState)([]),{refreshPrints:_}=(0,u.Q)(null);(0,i.useEffect)(()=>{async function fetchCategories(){try{let e=await (0,l.tG)();y(e)}catch(e){console.error("Failed to fetch categories:",e)}}(async function(){try{let e=await (0,l.d0)(s);e?p(e):g("Print not found.")}catch(e){g(e.message)}finally{h(!1)}})(),fetchCategories()},[s]);let handleCategoryChange=async e=>{if(n)try{await (0,l.LR)(n.id,e),p(t=>t?{...t,category_name:e}:null),_(),j(!1)}catch(e){alert(`Failed to update category: ${e.message}`)}};return x?r.jsx("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{className:"loading-text",children:"読み込み中..."})]})}):m?r.jsx("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"error-message-container",children:[(0,r.jsxs)("p",{className:"error-message",children:["エラー: ",m]}),r.jsx("button",{onClick:()=>t.back(),className:"button-primary",children:"戻る"})]})}):n?(0,r.jsxs)("div",{className:"page-container print-detail-page",children:[(0,r.jsxs)("header",{className:"detail-header",children:[r.jsx("button",{onClick:()=>t.back(),className:"icon-button",children:r.jsx(ArrowBackIcon,{})}),r.jsx("h1",{className:"detail-title",children:n.filename}),r.jsx("button",{onClick:()=>{n?.url&&window.open(n.url,"_blank")},className:"icon-button",children:r.jsx(DownloadIcon,{})})]}),(0,r.jsxs)("main",{className:"detail-content",children:[r.jsx("div",{className:"detail-image-container",children:r.jsx(o(),{src:n.url,alt:n.filename,layout:"fill",objectFit:"contain",className:"detail-image"})}),(0,r.jsxs)("div",{className:"detail-info",children:[(0,r.jsxs)("p",{className:"detail-info-item",children:[r.jsx("strong",{children:"アップロード日:"})," ",new Date(n.uploaded_at).toLocaleDateString()]}),n.family_member&&(0,r.jsxs)("p",{className:"detail-info-item",children:[r.jsx("strong",{children:"家族メンバー:"})," ",n.family_member]}),(0,r.jsxs)("div",{className:"detail-info-item category-section",children:[r.jsx("strong",{children:"カテゴリ:"})," ",n.category_name||"未分類",(0,r.jsxs)("button",{onClick:()=>j(!0),className:"button-secondary category-edit-button",children:[r.jsx(CategoryIcon,{})," カテゴリ変更"]})]})]})]}),r.jsx(c.Z,{isOpen:f,onClose:()=>j(!1),title:"カテゴリ変更",children:r.jsx(d.Z,{onClose:()=>j(!1),existingCategories:v,onCategoryUpdated:handleCategoryChange,isForSinglePrint:!0,currentPrintCategory:n.category_name})})]}):r.jsx("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"error-message-container",children:[r.jsx("p",{className:"error-message",children:"プリントが見つかりませんでした。"}),r.jsx("button",{onClick:()=>t.back(),className:"button-primary",children:"戻る"})]})})}},9335:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(5153);let i=(0,r.createProxy)(String.raw`/Users/satokeita/Dev/famiPrint/famiPrint/app/print/[id]/page.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[611,485,451,606,50,431,667],()=>__webpack_exec__(4405));module.exports=s})();